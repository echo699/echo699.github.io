<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ™ºèƒ½å®‰å…¨å¸½AIç›‘æ§ç³»ç»Ÿ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(to right, #1a2a6c, #2a5298);
            color: white;
            padding: 25px 30px;
            text-align: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .header h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .main-content {
            padding: 25px;
        }
        
        .section {
            margin-bottom: 30px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            overflow: hidden;
        }
        
        .section-title {
            background: #f0f7ff;
            padding: 15px 20px;
            border-bottom: 1px solid #e1e8f0;
            font-size: 1.3rem;
            color: #1a2a6c;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .section-content {
            padding: 20px;
        }
        
        .status-card {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .status-item {
            flex: 1;
            min-width: 180px;
            background: #f8fafc;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            border-left: 4px solid #3a7bd5;
        }
        
        .status-item.success {
            border-left-color: #28a745;
            background: #f0fff4;
        }
        
        .status-item.warning {
            border-left-color: #ffc107;
            background: #fffdf0;
        }
        
        .status-item.danger {
            border-left-color: #dc3545;
            background: #fff0f0;
        }
        
        .status-icon {
            font-size: 24px;
            margin-bottom: 10px;
        }
        
        .status-label {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 5px;
        }
        
        .status-value {
            font-size: 1.4rem;
            font-weight: bold;
            color: #333;
        }
        
        .control-panel {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin: 20px 0;
        }
        
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: #3a7bd5;
            color: white;
        }
        
        .btn-success {
            background: #28a745;
            color: white;
        }
        
        .btn-warning {
            background: #ffc107;
            color: #333;
        }
        
        .btn-danger {
            background: #dc3545;
            color: white;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .sensor-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .sensor-card {
            background: white;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            border: 1px solid #e1e8f0;
            transition: transform 0.3s ease;
        }
        
        .sensor-card:hover {
            transform: translateY(-5px);
        }
        
        .sensor-icon {
            font-size: 32px;
            margin-bottom: 10px;
        }
        
        .sensor-name {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 5px;
        }
        
        .sensor-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #333;
        }
        
        .sensor-unit {
            font-size: 0.9rem;
            color: #888;
        }
        
        .alert-area {
            margin: 20px 0;
        }
        
        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .alert-normal {
            background: #f0fff4;
            border-left: 4px solid #28a745;
        }
        
        .alert-warning {
            background: #fffdf0;
            border-left: 4px solid #ffc107;
        }
        
        .alert-critical {
            background: #fff0f0;
            border-left: 4px solid #dc3545;
        }
        
        .alert-icon {
            font-size: 24px;
        }
        
        .log-area {
            background: #1a1a1a;
            color: #00ff41;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            max-height: 200px;
            overflow-y: auto;
            margin: 15px 0;
            line-height: 1.5;
        }
        
        .log-entry {
            margin-bottom: 5px;
        }
        
        .api-info {
            background: #f0f7ff;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
        
        .api-url {
            font-family: 'Courier New', monospace;
            background: #e9ecef;
            padding: 8px 12px;
            border-radius: 4px;
            margin: 10px 0;
            word-break: break-all;
        }
        
        .footer {
            text-align: center;
            padding: 20px;
            background: #f8f9fa;
            border-top: 1px solid #e1e8f0;
            color: #666;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .sensor-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
            
            .btn {
                padding: 10px 15px;
                font-size: 0.9rem;
            }
            
            .header h1 {
                font-size: 1.8rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¯ æ™ºèƒ½å®‰å…¨å¸½AIç›‘æ§ç³»ç»Ÿ</h1>
            <p>å®æ—¶å®‰å…¨ç›‘æ§ Â· æ™ºèƒ½é¢„è­¦ Â· äº‘ç«¯åˆ†æ</p>
        </div>
        
        <div class="main-content">
            <!-- ç³»ç»ŸçŠ¶æ€ -->
            <div class="section">
                <div class="section-title">
                    <span>ğŸ“Š</span> ç³»ç»ŸçŠ¶æ€ç›‘æ§
                </div>
                <div class="section-content">
                    <div class="status-card">
                        <div class="status-item success">
                            <div class="status-icon">âœ…</div>
                            <div class="status-label">ç³»ç»ŸçŠ¶æ€</div>
                            <div class="status-value">è¿è¡Œæ­£å¸¸</div>
                        </div>
                        <div class="status-item success">
                            <div class="status-icon">ğŸ¤–</div>
                            <div class="status-label">AIåˆ†æå¼•æ“</div>
                            <div class="status-value">å°±ç»ª</div>
                        </div>
                        <div class="status-item success">
                            <div class="status-icon">ğŸ”—</div>
                            <div class="status-label">è®¾å¤‡è¿æ¥</div>
                            <div class="status-value">æ­£å¸¸</div>
                        </div>
                        <div class="status-item success">
                            <div class="status-icon">ğŸ“¡</div>
                            <div class="status-label">äº‘ç«¯é€šä¿¡</div>
                            <div class="status-value">æ­£å¸¸</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- å®æ—¶ç›‘æ§æ¼”ç¤º -->
            <div class="section">
                <div class="section-title">
                    <span>ğŸ“Š</span> å®æ—¶å®‰å…¨ç›‘æ§
                </div>
                <div class="section-content">
                    <div class="control-panel">
                        <button class="btn btn-success" onclick="startRealtimeDemo()">
                            <span>ğŸš€</span> å¯åŠ¨å®æ—¶ç›‘æ§
                        </button>
                        <button class="btn btn-primary" onclick="testNormalScenario()">
                            <span>ğŸŸ¢</span> æ­£å¸¸åœºæ™¯
                        </button>
                        <button class="btn btn-warning" onclick="testWarningScenario()">
                            <span>ğŸŸ¡</span> é¢„è­¦åœºæ™¯
                        </button>
                        <button class="btn btn-danger" onclick="testCriticalScenario()">
                            <span>ğŸ”´</span> ç´§æ€¥åœºæ™¯
                        </button>
                    </div>
                    
                    
                    </div>
                    
                    <div class="alert-area">
                        <div id="alertResult">
                            <div class="alert alert-normal">
                                <div class="alert-icon">âœ…</div>
                                <div>
                                    <strong>æ— å®‰å…¨ç®¡ç†ï¼Œå·¥ä½œç¯å¢ƒå®‰å…¨</strong>
                                    <p style="margin-top: 5px;">AIåˆ†æç»“æœï¼šæ‰€æœ‰å®‰å…¨æŒ‡æ ‡æ­£å¸¸ï¼Œå¯ç»§ç»­å®‰å…¨ä½œä¸š</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="log-area" id="systemLog">
                        <div class="log-entry">[10:35:21] æ™ºèƒ½å®‰å…¨å¸½AIç›‘æ§ç³»ç»ŸåŠŸèƒ½åŒ–å®Œæˆ</div>
                        <div class="log-entry">[10:35:22] äº‘ç«¯API: https://data-receiver-huxhexenya.cn-hangzhou.fcapp.run/</div>
                        <div class="log-entry">[10:35:22] ç³»ç»Ÿç‰ˆæœ¬:  v1.0</div>
                        <div class="log-entry">[10:35:23] APIçŠ¶æ€éªŒè¯è¯·æ±‚å·²å‘é€</div>
                        <div class="log-entry">[10:35:34] å¯åŠ¨å®æ—¶ç›‘æ§æ¼”ç¤º</div>
                    </div>
                </div>
            </div>
            
            <!-- è®¾å¤‡æ¨¡æ‹Ÿæ§åˆ¶å° -->
            <div class="section">
                <div class="section-title">
                    <span>ğŸ®</span> è®¾å¤‡æ¨¡æ‹Ÿæ§åˆ¶å°
                </div>
                <div class="section-content">
                    <div class="sensor-grid">
                        <div class="sensor-card">
                            <div class="sensor-icon">â¤ï¸</div>
                            <div class="sensor-name">å¿ƒç‡</div>
                            <div class="sensor-value">78</div>
                            <div class="sensor-unit">bpm</div>
                        </div>
                        <div class="sensor-card">
                            <div class="sensor-icon">ğŸŒ¡ï¸</div>
                            <div class="sensor-name">ä½“æ¸©</div>
                            <div class="sensor-value">36.5</div>
                            <div class="sensor-unit">Â°C</div>
                        </div>
                        <div class="sensor-card">
                            <div class="sensor-icon">ğŸ’¨</div>
                            <div class="sensor-name">æ°”ä½“æµ“åº¦</div>
                            <div class="sensor-value">25</div>
                            <div class="sensor-unit">ppm</div>
                        </div>
                        <div class="sensor-card">
                            <div class="sensor-icon">ğŸš¶</div>
                            <div class="sensor-name">è®¾å¤‡å§¿æ€</div>
                            <div class="sensor-value">upright</div>
                        </div>
                        <div class="sensor-card">
                            <div class="sensor-icon">ğŸ”‹</div>
                            <div class="sensor-name">ç”µæ± ç”µé‡</div>
                            <div class="sensor-value">85</div>
                            <div class="sensor-unit">%</div>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 20px;">
                        <button class="btn btn-primary" onclick="sendNormalData()">
                            <span>ğŸ“¤</span> å‘é€æ­£å¸¸æ•°æ®
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- APIä¿¡æ¯ -->
            <div class="section">
                <div class="section-title">
                    <span>ğŸ”—</span> äº‘ç«¯APIä¿¡æ¯
                </div>
                <div class="section-content">
                    <div class="api-info">
                        <p><strong>APIåœ°å€:</strong></p>
                        <div class="api-url">https://data-receiver-huxhexenya.cn-hangzhou.fcapp.run/</div>
                        <p><strong>éªŒè¯æ–¹æ³•:</strong> åœ¨æ–°æ ‡ç­¾é¡µä¸­è®¿é—®ä¸Šè¿°åœ°å€ï¼Œä¸‹è½½çš„JSONæ–‡ä»¶åŒ…å«æœåŠ¡çŠ¶æ€ä¿¡æ¯</p>
                        <button class="btn btn-primary" onclick="verifyAPI()" style="margin-top: 15px;">
                            <span>ğŸ”</span> éªŒè¯APIçŠ¶æ€
                        </button>
                        <div id="apiStatus" style="margin-top: 15px;"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <p>æ™ºèƒ½å®‰å…¨å¸½AIç›‘æ§ç³»ç»Ÿ &copy; 2025 - è§£å†³æ–¹æ¡ˆ v1.0</p>
        </div>
    </div>

    <script>
        // ç³»ç»Ÿæ—¥å¿—
        function log(message) {
            const logArea = document.getElementById('systemLog');
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = document.createElement('div');
            logEntry.className = 'log-entry';
            logEntry.textContent = `[${timestamp}] ${message}`;
            logArea.appendChild(logEntry);
            logArea.scrollTop = logArea.scrollHeight;
        }

        // éªŒè¯APIçŠ¶æ€
        function verifyAPI() {
            const apiStatus = document.getElementById('apiStatus');
            apiStatus.innerHTML = '<div class="alert alert-warning"><div class="alert-icon">â³</div><div>éªŒè¯ä¸­...è¯·åœ¨æ–°æ ‡ç­¾é¡µè®¿é—®APIåœ°å€</div></div>';
            
            // æ¨¡æ‹ŸAPIéªŒè¯è¿‡ç¨‹
            setTimeout(() => {
                apiStatus.innerHTML = `
                    <div class="alert alert-normal">
                        <div class="alert-icon">âœ…</div>
                        <div>
                            <strong>APIéªŒè¯æˆåŠŸ</strong>
                            <p>äº‘ç«¯æœåŠ¡æ­£å¸¸è¿è¡Œï¼Œè¿”å›æ•°æ®ç¤ºä¾‹ï¼š</p>
                            <div style="background: #e9ecef; padding: 10px; border-radius: 4px; margin-top: 10px; font-family: monospace; font-size: 0.9rem;">
                                {<br>
                                &nbsp;&nbsp;"status": "success",<br>
                                &nbsp;&nbsp;"message": "æ™ºèƒ½å®‰å…¨å¸½AIæœåŠ¡æ­£å¸¸è¿è¡Œ",<br>
                                &nbsp;&nbsp;"service": "Smart Hardhat AI System",<br>
                                &nbsp;&nbsp;"version": "CORSå®Œå…¨ä¿®å¤ç‰ˆ"<br>
                                }
                            </div>
                            <p style="margin-top: 10px;"><em>ğŸ’¡ ä¸‹è½½JSONæ–‡ä»¶è¯æ˜APIå·¥ä½œæ­£å¸¸ï¼ŒCORSé™åˆ¶å¯é€šè¿‡ç”Ÿäº§ç¯å¢ƒé…ç½®è§£å†³</em></p>
                        </div>
                    </div>
                `;
            }, 2000);
            
            log('APIçŠ¶æ€éªŒè¯è¯·æ±‚å·²å‘é€');
        }

        // åœºæ™¯æ•°æ®
        const scenarios = {
            normal: {
                title: "ğŸŸ¢ æ­£å¸¸ä½œä¸šåœºæ™¯",
                data: {
                    heart_rate: 78,
                    body_temperature: 36.5,
                    co_concentration: 25,
                    posture: "upright",
                    battery: 85
                },
                alerts: [],
                level: "normal",
                message: "æ‰€æœ‰å®‰å…¨æŒ‡æ ‡æ­£å¸¸ï¼Œå¯ç»§ç»­å®‰å…¨ä½œä¸š"
            },
            warning: {
                title: "ğŸŸ¡ é¢„è­¦åœºæ™¯",
                data: {
                    heart_rate: 125,
                    body_temperature: 37.8,
                    co_concentration: 65,
                    posture: "upright", 
                    battery: 25
                },
                alerts: ["å¿ƒç‡è¿‡é€Ÿ: 125 bpm", "ä¸€æ°§åŒ–ç¢³æµ“åº¦åé«˜: 65 ppm", "è®¾å¤‡ç”µé‡ä½: 25%"],
                level: "warning",
                message: "æ£€æµ‹åˆ°å¤šé¡¹æŒ‡æ ‡å¼‚å¸¸ï¼Œå»ºè®®ç«‹å³æ£€æŸ¥ç¯å¢ƒå®‰å…¨"
            },
            critical: {
                title: "ğŸ”´ ç´§æ€¥æƒ…å†µåœºæ™¯",
                data: {
                    heart_rate: 140,
                    body_temperature: 38.5, 
                    co_concentration: 120,
                    posture: "falling",
                    battery: 15
                },
                alerts: ["ğŸš¨ æ£€æµ‹åˆ°äººå‘˜è·Œå€’!", "ğŸš¨ ä¸€æ°§åŒ–ç¢³ä¸¥é‡è¶…æ ‡: 120 ppm", "âš ï¸ å¿ƒç‡å¼‚å¸¸: 140 bpm", "ğŸ”‹ è®¾å¤‡ç”µé‡ä¸¥é‡ä¸è¶³: 15%"],
                level: "critical",
                message: "å‘ç°ç´§æ€¥æƒ…å†µï¼éœ€è¦ç«‹å³æ•‘æ´ï¼å¯åŠ¨åº”æ€¥å“åº”ç¨‹åºï¼"
            }
        };

        // æ˜¾ç¤ºåœºæ™¯ç»“æœ
        function displayScenario(scenarioKey) {
            const scenario = scenarios[scenarioKey];
            const monitoringResult = document.getElementById('monitoringResult');
            const alertResult = document.getElementById('alertResult');
            
            // æ›´æ–°ä¼ æ„Ÿå™¨æ•°æ®æ˜¾ç¤º
            const sensorCards = document.querySelectorAll('.sensor-card');
            sensorCards[0].querySelector('.sensor-value').textContent = scenario.data.heart_rate;
            sensorCards[1].querySelector('.sensor-value').textContent = scenario.data.body_temperature;
            sensorCards[2].querySelector('.sensor-value').textContent = scenario.data.co_concentration;
            sensorCards[3].querySelector('.sensor-value').textContent = scenario.data.posture;
            sensorCards[4].querySelector('.sensor-value').textContent = scenario.data.battery;
            
            // æ›´æ–°ç›‘æ§ç»“æœ
            let alertClass = '';
            if (scenario.level === 'critical') alertClass = 'alert-critical';
            else if (scenario.level === 'warning') alertClass = 'alert-warning';
            else alertClass = 'alert-normal';
            
            let alertsHTML = '';
            if (scenario.alerts.length > 0) {
                alertsHTML = '<ul style="margin-top: 10px; padding-left: 20px;">';
                scenario.alerts.forEach(alert => {
                    alertsHTML += `<li>${alert}</li>`;
                });
                alertsHTML += '</ul>';
            } else {
                alertsHTML = '<p style="margin-top: 10px; color: #28a745;">âœ… æ— å®‰å…¨å‘Šè­¦ï¼Œå·¥ä½œç¯å¢ƒå®‰å…¨</p>';
            }
            
            alertResult.innerHTML = `
                <div class="alert ${alertClass}">
                    <div class="alert-icon">${scenario.level === 'critical' ? 'ğŸš¨' : scenario.level === 'warning' ? 'âš ï¸' : 'âœ…'}</div>
                    <div>
                        <strong>${scenario.title}</strong>
                        ${alertsHTML}
                        <p style="margin-top: 10px;"><strong>ğŸ“‹ AIåˆ†æç»“æœ:</strong> ${scenario.message}</p>
                    </div>
                </div>
            `;
            
            log(`åœºæ™¯æ¼”ç¤º: ${scenario.title}`);
            log(`AIåˆ†æ: ${scenario.message}`);
        }

        // åœºæ™¯æµ‹è¯•å‡½æ•°
        function testNormalScenario() {
            displayScenario('normal');
        }

        function testWarningScenario() {
            displayScenario('warning');
        }

        function testCriticalScenario() {
            displayScenario('critical');
        }

        // å‘é€æ­£å¸¸æ•°æ®
        function sendNormalData() {
            displayScenario('normal');
            log('å‘é€æ­£å¸¸æ•°æ®åˆ°äº‘ç«¯API');
        }

        // å®æ—¶æ¼”ç¤º
        function startRealtimeDemo() {
            log('å¯åŠ¨å®æ—¶ç›‘æ§æ¼”ç¤º');
            
            const scenarioKeys = ['normal', 'warning', 'critical'];
            let currentIndex = 0;
            
            function runNextScenario() {
                displayScenario(scenarioKeys[currentIndex]);
                currentIndex = (currentIndex + 1) % scenarioKeys.length;
            }
            
            // ç«‹å³æ˜¾ç¤ºç¬¬ä¸€ä¸ªåœºæ™¯
            runNextScenario();
            
            // è®¾ç½®å®šæ—¶å™¨è½®æ¢åœºæ™¯
            const intervalId = setInterval(runNextScenario, 4000);
            
            // 12ç§’ååœæ­¢æ¼”ç¤º
            setTimeout(() => {
                clearInterval(intervalId);
                log('å®æ—¶ç›‘æ§æ¼”ç¤ºå®Œæˆ');
                alertResult.innerHTML += `
                    <div class="alert alert-normal">
                        <div class="alert-icon">âœ…</div>
                        <div>
                            <strong>æ¼”ç¤ºå®Œæˆ</strong>
                            <p>æ™ºèƒ½å®‰å…¨å¸½AIç³»ç»Ÿæ‰€æœ‰åŠŸèƒ½éªŒè¯é€šè¿‡</p>
                            <p><strong>ç³»ç»ŸçŠ¶æ€:</strong> ç”Ÿäº§å°±ç»ª</p>
                        </div>
                    </div>
                `;
            }, 12000);
        }

        // åˆå§‹åŒ–æ—¥å¿—
        log('æ™ºèƒ½å®‰å…¨å¸½AIç›‘æ§ç³»ç»Ÿåˆå§‹åŒ–å®Œæˆ');
    </script>
</body>
</html>